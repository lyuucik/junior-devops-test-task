# Тестовое задание для junior DevOps

Привет! Задания не сложные на умение загуглить и понять по условию, что от тебя хотят. Все сервера linux , поэтому базовые команды по копированию файлов, подключения по ssh , чтению логов, считаем что знаешь. Результат прислать можно в ответном файле со скринами и пояснениями , на сколько считаешь достаточным, чем подробней тем лучше, но без вопросов не обойтись, начнем?

1. Ansible.

Написать простенький ansible-playbook.

Условия:

- структуру папок создать самому
- в hosts.ini записать группу серверов, группу назвать server
- создать роль copy, в которой есть таска по копирования локальных файлой на сервера ( server)

Вопросы:
- Что использовал и в чем разница with_items от loop?
> `loop` - современная замена `with_items`, поддерживает более сложные операция

- Запустил и что-то не работает как узнать подробнее?
> `ansible-playbook -vvv playbook.yml` для подробного вывода

2. Bash.

Написать простенький скрипт, который:
- шебанг баш
- в директории логов ищет внутри файлов слово php7.4 и считает кол-во строк совпадения
- в коде присутствует счетчик, который с самого начала записывает таймстемп начала и конца, на основании разницы выводит время( получается что фактически он считает время работы скрипта)
- вывести результат работы script.sh в другой файл используя только стандартный поток вывода.
> выводится командой `./script.sh > output.txt`, предварительно сделав файл исполняемым `chmod +x script.sh`


3. Docker.

Написать простенький docker-compose файл для запуска в docker-compose условия:
- 2 сервиса Nginx и PHP имена такие же как сервис
- nginx версия образа 1.25 , порт на внешке 1243, в томе пробросить файл конфигурации default.conf, по условию ждать пока не запустится контейнер php
- php  использовать официальную образ PHP со встроенным FPM версии 7.4, смонтировать текущий каталог в каталог  /var/local/sandboxes/dev/www в контейнере , переменную окружения PHP_FPM_LISTEN устанавить 0.0.0.0:9000
- Чтоб контейнеры в сети докер между собой могли общаться создать сеть с названием vita в этом же файле docker-compose

* дополнительно, по желанию добавить третьим контейнер с базой postgres 15

- Написать команду запуска

Вопросы:

- если файл default.conf в системе поменяется, изменится ли он  внутри контейнера тоже?
- да, файл внутри контейнера изменится автоматом

- Нужен рестарт при изменение файла default.conf ?
- достаточно обновить конфиг `nginx -s reload`

- А если в docker-compose внесли изменения?
- нужно пересоздать контейнеры

- Что нравится больше docker-compose или docker-swarm ?
- работал только с docker-compose


